# Flaskè®¿å®¢è¿½è¸ªç³»ç»Ÿ - å®ç°æ–¹æ¡ˆ

## ğŸ“ é¡¹ç›®ç»“æ„

```
flask-visitor-tracker/
â”œâ”€â”€ app.py                    # Flaskä¸»åº”ç”¨å…¥å£
â”œâ”€â”€ config.json               # é…ç½®æ–‡ä»¶ï¼ˆéƒ¨ç½²åŸŸåç­‰ï¼‰
â”œâ”€â”€ requirements.txt          # Pythonä¾èµ–
â”œâ”€â”€ tracker/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ routes.py            # APIè·¯ç”±
â”‚   â”œâ”€â”€ services.py          # ä¸šåŠ¡é€»è¾‘
â”‚   â””â”€â”€ utils.py             # å·¥å…·å‡½æ•°
â”œâ”€â”€ static/
â”‚   â””â”€â”€ tracker.js           # WordPresså¼•ç”¨çš„JSæ–‡ä»¶
â””â”€â”€ data/
    â””â”€â”€ visits.json          # å­˜å‚¨è®¿å®¢æ•°æ®ï¼ˆJSONæ–‡ä»¶å­˜å‚¨ï¼‰
```

## ğŸ“‹ config.json é…ç½®

```json
{
  "app": {
    "host": "0.0.0.0",
    "port": 5000,
    "debug": false,
    "secret_key": "your-secret-key-here"
  },
  "domains": {
    "allowed": [
      "your-wordpress-domain.com",
      "www.your-wordpress-domain.com"
    ],
    "cors_origins": [
      "https://your-wordpress-domain.com"
    ]
  },
  "pythonanywhere": {
    "username": "your-username",
    "hostname": "pythonanywhere.com",
    "api_token": "your-api-token"
  },
  "tracking": {
    "session_timeout_minutes": 30,
    "max_events_per_session": 100,
    "data_retention_days": 90,
    "anonymize_ip": true
  },
  "features": {
    "track_pageviews": true,
    "track_clicks": true,
    "track_scroll": true,
    "track_forms": true,
    "track_device_info": true
  }
}
```

## ğŸ”§ æ ¸å¿ƒæ–‡ä»¶å®ç°

### 1. app.py - ä¸»åº”ç”¨

* Flask + CORSé…ç½®

* APIè“å›¾æ³¨å†Œ

* JSONæ–‡ä»¶å­˜å‚¨

### 2. tracker/routes.py - APIç«¯ç‚¹

* `POST /api/tracker/visit` - è®°å½•è®¿é—®

* `POST /api/tracker/event` - è®°å½•äº‹ä»¶

* `GET /api/tracker/stats` - è·å–ç»Ÿè®¡

* `GET /api/tracker/logs` - HTTPè®¿é—®æ—¥å¿—

### 3. tracker/services.py - ä¸šåŠ¡é€»è¾‘

* è®¿å®¢IDç”Ÿæˆï¼ˆåŒ¿ååŒ–ï¼‰

* IPåœ°ç†ä½ç½®ï¼ˆå¯é€‰APIï¼‰

* ç»Ÿè®¡æ•°æ®è®¡ç®—

* æ—¥å¿—ç®¡ç†

### 4. static/tracker.js - WordPresså¼•ç”¨çš„JS

* è‡ªåŠ¨æ”¶é›†è®¿å®¢ä¿¡æ¯

* é¡µé¢æµè§ˆè¿½è¸ª

* ç‚¹å‡»/æ»šåŠ¨/è¡¨å•äº‹ä»¶

* Beaconå‘é€æ•°æ®

## ğŸ“Š ç»Ÿè®¡åŠŸèƒ½

* é¡µé¢æµè§ˆé‡ç»Ÿè®¡

* ç‹¬ç«‹è®¿å®¢æ•°

* æŒ‰é¡µé¢/æ¥æº/è®¾å¤‡åˆ†ç»„

* å®æ—¶è®¿é—®æ—¥å¿—

* è®¿é—®è¶‹åŠ¿å›¾è¡¨

## ğŸš€ éƒ¨ç½²æ­¥éª¤

1. åˆ›å»ºé¡¹ç›®æ–‡ä»¶
2. ä¸Šä¼ åˆ°GitHub
3. åœ¨PythonAnywhereå…‹éš†
4. å®‰è£…ä¾èµ–ï¼š`pip install -r requirements.txt`
5. é…ç½®config.json
6. åœ¨Webæ ‡ç­¾é¡µé…ç½®WSGI
7. è®¾ç½®å®šæ—¶ä»»åŠ¡å¤‡ä»½æ•°æ®

## ğŸ“ é›†æˆæ–¹å¼

WordPressä¸­æ·»åŠ ï¼š

```php
// functions.php æˆ–æ’ä»¶
wp_enqueue_script('visitor-tracker', 'https://your-flask-app.pythonanywhere.com/tracker.js');
```

æˆ–ä½¿ç”¨ `<script src="..."></script>` ç›´æ¥åµŒå…¥
